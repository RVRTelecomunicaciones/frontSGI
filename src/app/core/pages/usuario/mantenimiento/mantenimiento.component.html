<form
  nz-form
  [formGroup]="validateForm"
  (ngSubmit)="submitForm(validateForm.value)"
>
  <div nz-row [nzGutter]="[32, 8]">
    <div
      nz-col
      class="gutter-row"
      [nzXs]="24"
      [nzSm]="24"
      [nzMd]="24"
      [nzLg]="12"
      [nzXl]="14"
    >
      <div class="inner-box">
        <div nz-row [nzGutter]="8">
          <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="24" [nzLg]="12">
            <nz-form-item>
              <nz-form-label
                [nzSm]="24"
                [nzMd]="8"
                [nzLg]="24"
                [nzXl]="8"
                nzRequired
                >A. Paterno</nz-form-label
              >
              <nz-form-control
                [nzSm]="24"
                [nzMd]="16"
                [nzLg]="24"
                [nzXl]="16"
                nzHasFeedback
                nzErrorTip="Campo requerido"
              >
                <input
                  type="text"
                  nz-input
                  formControlName="paterno"
                  placeholder="Apellido paterno"
                  minlength="2"
                  maxlength="15"
                />
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="24" [nzLg]="12">
            <nz-form-item>
              <nz-form-label
                [nzSm]="24"
                [nzMd]="8"
                [nzLg]="24"
                [nzXl]="8"
                nzRequired
                >A. Materno</nz-form-label
              >
              <nz-form-control
                [nzSm]="24"
                [nzMd]="16"
                [nzLg]="24"
                [nzXl]="16"
                nzHasFeedback
                nzErrorTip="Campo requerido"
              >
                <input
                  type="text"
                  nz-input
                  formControlName="materno"
                  placeholder="Apellido materno"
                  minlength="2"
                  maxlength="15"
                />
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
        <div nz-row [nzGutter]="8">
          <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="24" [nzLg]="12">
            <nz-form-item>
              <nz-form-label
                [nzSm]="24"
                [nzMd]="8"
                [nzLg]="24"
                [nzXl]="8"
                nzRequired
                >Nombres</nz-form-label
              >
              <nz-form-control
                [nzSm]="24"
                [nzMd]="16"
                [nzLg]="24"
                [nzXl]="16"
                nzHasFeedback
                nzErrorTip="Campo requerido"
              >
                <input
                  type="text"
                  nz-input
                  formControlName="nombres"
                  placeholder="Nombres"
                />
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="24" [nzLg]="12">
            <nz-form-item>
              <nz-form-label
                [nzSm]="24"
                [nzMd]="8"
                [nzLg]="24"
                [nzXl]="8"
                nzRequired
                >Dni</nz-form-label
              >
              <nz-form-control
                [nzSm]="24"
                [nzMd]="16"
                [nzLg]="24"
                [nzXl]="16"
                nzErrorTip="Campo requerido"
              >
                <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButtonDni">
                  <input
                    type="text"
                    nz-input
                    formControlName="dni"
                    placeholder="Dni"
                  />
                </nz-input-group>
                <ng-template #suffixIconButtonDni>
                  <button nz-button nzType="primary" nzSearch>
                    <i nz-icon nzType="search"></i>
                  </button>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
        <div nz-row [nzGutter]="8">
          <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="24" [nzLg]="24">
            <nz-form-item>
              <nz-form-label
                [nzSm]="24"
                [nzMd]="8"
                [nzLg]="24"
                [nzXl]="4"
                nzRequired
                >Correo</nz-form-label
              >
              <nz-form-control
                [nzSm]="24"
                [nzMd]="16"
                [nzLg]="24"
                [nzXl]="20"
                nzHasFeedback
                [nzErrorTip]="emailErrorTpl"
              >
                <input
                  nz-input
                  formControlName="email"
                  placeholder="email"
                  type="email"
                />
                <ng-template #emailErrorTpl let-control>
                  <ng-container *ngIf="control.hasError('email')"
                    >The input is not valid E-mail!</ng-container
                  >
                  <ng-container *ngIf="control.hasError('required')"
                    >Please input your E-mail!</ng-container
                  >
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
        <div nz-row [nzGutter]="8">
          <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="24" [nzLg]="24">
            <nz-form-item *ngFor="let control of listOfControl; let i = index">
              <nz-form-label
                [nzXs]="24"
                [nzSm]="4"
                *ngIf="i === 0"
                [nzFor]="control.controlInstance"
              >
                Área / Rol
              </nz-form-label>
              <nz-form-control
                [nzXs]="24"
                [nzXl]="20"
                [nzOffset]="i === 0 ? 0 : 4"
                nzErrorTip="Please input passenger's name or delete this field."
              >
                <nz-cascader
                  class="passenger-input"
                  [nzOptions]="nzOptions"
                  [attr.id]="control.id"
                  [formControlName]="control.controlInstance"
                ></nz-cascader>
                <i
                  nz-icon
                  nzType="minus-circle-o"
                  class="dynamic-delete-button"
                  (click)="removeField(control, $event)"
                ></i>
              </nz-form-control>
            </nz-form-item>
            <nz-form-item>
              <nz-form-control
                [nzXs]="{ span: 24, offset: 0 }"
                [nzSm]="{ span: 20, offset: 4 }"
              >
                <button
                  nz-button
                  nzType="dashed"
                  class="add-button"
                  (click)="addField($event)"
                >
                  <i nz-icon nzType="plus"></i>
                  Nuevo rol
                </button>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
        <!--<div nz-row [nzGutter]="8">
          <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="24" [nzLg]="12">
            <nz-form-item>
              <nz-form-label
                [nzSm]="24"
                [nzMd]="8"
                [nzLg]="24"
                [nzXl]="8"
                nzRequired
                >Area</nz-form-label
              >
              <nz-form-control
                [nzSm]="24"
                [nzMd]="16"
                [nzLg]="24"
                [nzXl]="16"
                nzHasFeedback
                nzErrorTip="Campo requerido"
              >
                <nz-select
                  formControlName="area"
                  nzPlaceHolder="Seleccione"
                  nzAllowClear
                  nzShowSearch
                  [(ngModel)]="selectedArea"
                  (ngModelChange)="areaChange($event)"
                >
                  <nz-option
                    *ngFor="let p of areaData"
                    [nzValue]="p"
                    [nzLabel]="p"
                  ></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="24" [nzLg]="12">
            <nz-form-item>
              <nz-form-label
                [nzSm]="24"
                [nzMd]="8"
                [nzLg]="24"
                [nzXl]="8"
                nzRequired
                >Rol</nz-form-label
              >
              <nz-form-control
                [nzSm]="24"
                [nzMd]="16"
                [nzLg]="24"
                [nzXl]="16"
                nzHasFeedback
                nzErrorTip="Campo requerido"
              >
                <nz-select nzPlaceHolder="Seleccione" formControlName="rol">
                  <nz-option
                    *ngFor="let c of rolData[selectedArea]"
                    [nzValue]="c"
                    [nzLabel]="c"
                  ></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>-->
      </div>
    </div>
    <div
      nz-col
      class="gutter-row"
      [nzXs]="24"
      [nzSm]="24"
      [nzMd]="24"
      [nzLg]="12"
      [nzXl]="10"
    >
      <div class="inner-box">
        <nz-card [nzBordered]="true" nzTitle="DATOS DE ACCESO">
          <nz-form-item>
            <nz-form-label
              [nzSm]="24"
              [nzMd]="10"
              [nzLg]="24"
              [nzXl]="10"
              nzRequired
              >Usuario</nz-form-label
            >
            <nz-form-control
              [nzSm]="24"
              [nzMd]="14"
              [nzLg]="24"
              [nzXl]="14"
              nzHasFeedback
              nzValidatingTip="Validating..."
              [nzErrorTip]="userErrorTpl"
            >
              <input nz-input formControlName="usuario" placeholder="Usuario" />
              <ng-template #userErrorTpl let-control>
                <ng-container *ngIf="control.hasError('required')"
                  >Campo requerido</ng-container
                >
                <ng-container *ngIf="control.hasError('duplicated')"
                  >El usuario esta registrado</ng-container
                >
              </ng-template>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label
              [nzSm]="24"
              [nzMd]="10"
              [nzLg]="24"
              [nzXl]="10"
              nzRequired
              >Contraseña</nz-form-label
            >
            <nz-form-control
              [nzSm]="24"
              [nzMd]="14"
              [nzLg]="24"
              [nzXl]="14"
              nzHasFeedback
              nzErrorTip="Campo requerido"
            >
              <nz-input-group [nzSuffix]="suffixTemplatePassword">
                <input
                  [type]="passwordVisible ? 'text' : 'password'"
                  nz-input
                  formControlName="password"
                  placeholder="Contraseña"
                  (ngModelChange)="validateConfirmPassword()"
                  [(ngModel)]="password"
                />
              </nz-input-group>
              <ng-template #suffixTemplatePassword>
                <i
                  nz-icon
                  [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
                  (click)="passwordVisible = !passwordVisible"
                ></i>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label
              [nzSm]="24"
              [nzMd]="10"
              [nzLg]="24"
              [nzXl]="10"
              nzRequired
              >Confirmar contraseña</nz-form-label
            >
            <nz-form-control
              [nzSm]="24"
              [nzMd]="14"
              [nzLg]="24"
              [nzXl]="14"
              nzHasFeedback
              [nzErrorTip]="passwordErrorTpl"
            >
              <nz-input-group [nzSuffix]="suffixTemplateConfirmPassword">
                <input
                  [type]="confirmPasswordVisible ? 'text' : 'password'"
                  nz-input
                  formControlName="confirmPassword"
                  placeholder="Confirmar contraseña"
                  [(ngModel)]="confirmPassword"
                />
              </nz-input-group>
              <ng-template #suffixTemplateConfirmPassword>
                <i
                  nz-icon
                  [nzType]="confirmPasswordVisible ? 'eye-invisible' : 'eye'"
                  (click)="confirmPasswordVisible = !confirmPasswordVisible"
                ></i>
              </ng-template>
              <ng-template #passwordErrorTpl let-control>
                <ng-container *ngIf="control.hasError('required')"
                  >Por favor confirmar contraseña</ng-container
                >
                <ng-container *ngIf="control.hasError('confirm')"
                  >No coinciden las contraseñas</ng-container
                >
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </nz-card>
      </div>
    </div>
  </div>
  <nz-form-item>
    <nz-form-control [nzOffset]="7" [nzSpan]="12">
      <button nz-button nzType="primary" [disabled]="!validateForm.valid">
        <i nz-icon nzType="save" nzTheme="outline"></i>
        Grabar
      </button>
      <button nz-button (click)="resetForm($event)">
        <i nz-icon nzType="clear" nzTheme="outline"></i> Limpiar
      </button>
    </nz-form-control>
  </nz-form-item>
</form>
